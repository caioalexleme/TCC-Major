<!doctype html>
<html lang="pt-br">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Fornecedores</title>
    <link rel="stylesheet" type="text/css" href="estiloforn.css">
    <!--Ajax-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>

<body>
    <!--Topo da página-->
    <div id="topo">
        <div class="container">
            <div id="menu">

                <div <a href="index.html"><img src="imagens/logoex.png" width="300" height="100"></a></div>
            </div>

            <!--Inicio Menu-->
            <div id="navmenu">

                <!--Menu Manutenção-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Manutenção
                    </button>
                    <div class="dropdown-menu  " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item " href="manut_pessoa.php">Pessoa fisica</a>
                        <a class="dropdown-item  " href="manut_empresa.php">Empresa</a>
                    </div>
                </div>

                <!--Menu Registros-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Registros
                    </button>
                    <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="registre_pess.php">Pessoa fisica</a>
                        <a class="dropdown-item" href="registre_emp.php">Empresa</a>
                    </div>
                </div>

                <!--Menu Cadastro-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Cadastro
                    </button>
                    <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="produto.html">Produtos</a>
                        <a class="dropdown-item" href="pacote.html">Pacotes</a>
                        <a class="dropdown-item" href="fornecedores.html">Fornecedores</a>
                    </div>
                </div>

                <!--Menu Consulta Vendas-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white  dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Consulta vendas
                    </button>
                    <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="vs_vendas.php">Visualizar vendas</a>
                        <a class="dropdown-item" href="rel_vendas.html">Gerar relatorios</a>
                    </div>
                </div>

                <!--Menu Contatos-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Contatos
                    </button>
                    <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="mensagens.html">Mensagens</a>
                        <a class="dropdown-item" href="excluir_contato.php">Excluir mensagens</a>
                    </div>
                </div>

                <!--Menu ADM-->
                <div class="dropdown">
                    <button class="btn btn-dark text-white  dropdown-toggle" type="button" id="dropdownMenuButton"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Sair
                    </button>
                    <div class="dropdown-menu " aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="sair.php">Sair</a>
                    </div>
                </div>
            </div><br>
            <!--Fim Menu-->
            <!--Inicio Formulario-->
            <center>
                <form id="forn" name="forn" action="" method="">
                    <h1>Fornecedores</h1><br><br><br>
                    <label>Razão Social</label> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                    &nbsp &nbsp &nbsp &nbsp
                    <input type="text" name="razao_social" id="razao_social" required><br>
                    <label>Nome do Fornecedor</label> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp
                    <input type="text" name="nome_forn" id="nome_forn" required><br>
                    <label>Telefone</label> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                    &nbsp &nbsp &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp &nbsp &nbsp
                    <input type="text" name="telefone" id="telefone" required><br>
                    <label>CNPJ</label> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                    &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp
                    <input type="text" name="cnpj" id="cnpj" required><br>
                    <label>E-mail</label> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                    &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                    <input type="email" name="email" id="email" required><br>
                    <input type="submit" id="adicionar" value="Adicionar">
                    <input type="submit" id="excluir" value="Excluir">
                    <input type="submit" id="consultar" value="Consultar">
                    <input type="submit" id="alterar" value="Alterar"><br><br>
                    <a id="pag" href="forn.php">Fornecedores</a>
                </form>
            </center>
        </div>
    </div>

    <center>
        <h2>...</h2>
        <div id="resposta">
            <!--Dentro dessa div fica o retorno!-->
        </div>
    </center>
    <!--Fim Formulário-->

    <!--Inicio Rotina Java Script-->
    <script>
        $(document).ready(function () {
            $('#adicionar').click(function () {

                var dados = $('#forn').serialize();

                $.ajax({
                    method: 'POST',
                    url: 'adc_forn.php',
                    data: dados,

                    beforeSend: function () {
                        $("h2").html("Processo em andamento...");
                    }
                })

                    .done(function (msg) {
                        $("h2").html("Retorno da Inclusão...");
                        $("#resposta").html(msg);

                        alert("Dados cadastrados com sucesso!");
                    })

                    .fail(function () {
                        alert("Falha no Envio");
                    })

                return false;
            })
        });
    </script>

    <script>
        $(document).ready(function () {
            $('#excluir').click(function () {

                var dados = $('#forn').serialize();

                $.ajax({
                    method: 'POST',
                    url: 'exc_forn.php',
                    data: dados,

                    beforeSend: function () {
                        $("h2").html("Exclusão em andamento...");
                    }
                })

                    .done(function (msg) {
                        $("h2").html("Retorno da Exclusão...");
                        $("#resposta").html(msg);

                        alert(msg);
                    })

                    .fail(function () {
                        alert("Falha na exclusão");
                    })

                return false;
            })
        });
    </script>

    <script>
        $('#consultar').click(function () {

            var dados = $('#forn').serialize();

            $.ajax({
                method: 'POST',
                url: 'cons_forn.php',
                data: dados,

                beforeSend: function () {
                    $("h2").html("Carregar consulta...");
                }
            })

                .done(function (msg) {
                    $("h2").html("Dados de Pesquisa...");

                    var Forn = JSON.parse(msg);

                    //Consulta em formulário --------------
                    document.getElementById('razao_social').value = Forn[0].razao_social;
                    document.getElementById('nome_forn').value = Forn[0].nome_forn;
                    document.getElementById('telefone').value = Forn[0].telefone;
                    document.getElementById('cnpj').value = Forn[0].cnpj;
                    document.getElementById('email').value = Forn[0].email;
                })

                .fail(function () {
                    alert("Falha na Consulta");
                })

            return false;
        });
    </script>

    <script>
        $(document).ready(function () {
            $('#alterar').click(function () {

                var dados = $('#forn').serialize();

                $.ajax({
                    method: 'POST',
                    url: 'alt_forn.php',
                    data: dados,

                    beforeSend: function () {
                        $("h2").html("Alteração em andamento...");
                    }
                })

                    .done(function (msg) {
                        $("h2").html("Retorno da Alteração...");
                        $("#resposta").html(msg);

                        alert("Dados alterados com sucesso!");
                    })

                    .fail(function () {
                        alert("Falha na Alteração");
                    })

                return false;
            })
        });
    </script>
    <!--Fim Rotina Java Script -->
    </div>
    </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
</body>

</html>